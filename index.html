<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style/reset.css">
    <link rel="stylesheet" href="style/index.css">
    <title>DrivenEats</title>
</head>
<body>
    <div class="header">
        <h1>DrivenEats</h1>
        <strong>Sua comida em 6 minutos</strong>
    </div>
    <div class="container">
        <div>
            <h1>Primeiro, seu prato</h1>
            <div id="card-list-foods" class="card-list">

                <button id="botao1" class="card" id="Frango Yin Yang" data-teste="dish">
                    <img src="/images/frango_yin_yang.png" alt="frango yin yang">
                    <h1 data-teste="item-name">Frango Yin Yang</h1>
                    <p>Um pouco de batata, um pouco de salada</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>14,90</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

                <button id="botao2" class="card" id="Frango Yin" data-teste="dish">
                    <img src="/images/frango_yin_yang.png" alt="frango yin yang">
                    <h1 data-teste="item-name">Frango Yin</h1>
                    <p>Um pouco de batata, e a escuridão</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>13,50</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

                <button id="botao3" class="card" id="Frango Yang" data-teste="dish">
                    <img src="/images/frango_yin_yang.png" alt="frango yin yang">
                    <h1 data-teste="item-name">Frango Yang</h1>
                    <p>Um pouco de batata, e a claridade</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>9,99</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

            </div>
        </div>
        <div>
            <h1>Agora, sua bebida</h1>
            <div class="card-list">

                <button id="botao4" class="card" data-teste="drink">
                    <img src="/images/coca-cola.png" alt="coca-cola">
                    <h1 data-teste="item-name">Coquinha trincando</h1>
                    <p>Lata 350ml</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>14,90</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

                <button id="botao5" class="card" data-teste="drink">
                    <img src="/images/coca-cola.png" alt="coca-cola">
                    <h1 data-teste="item-name">Coquinha gelada</h1>
                    <p>Lata 350ml</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>12,50</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

                <button id="botao6" class="card" data-teste="drink">
                    <img src="/images/coca-cola.png" alt="Coca-Cola">
                    <h1 data-teste="item-name">Coquinha quente</h1>
                    <p>Lata 350ml</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>10,00</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

            </div>
        </div>
        <div>
            <h1>Por fim, sua sobremesa</h1>
            <div class="card-list">

                <button id="botao7" class="card" data-teste="dessert">
                    <img src="/images/pudim.png" alt="Pudim">
                    <h1 data-teste="item-name">Pudim</h1>
                    <p>Apenas pudim</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>7,90</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

                <button id="botao8" class="card" data-teste="dessert">
                    <img src="/images/pudim.png" alt="Pudim">
                    <h1 data-teste="item-name">Pudim com granulado</h1>
                    <p>Apenas pudim e granulado</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>8,99</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

                <button id="botao9" class="card" data-teste="dessert">
                    <img src="/images/pudim.png" alt="Pudim">
                    <h1 data-teste="item-name">Pudim recheado</h1>
                    <p>Apenas pudim e recheio de nutella</p>
                    <div>
                        <strong data-teste="item-price">R$ <strong>15,99</strong></strong>
                        <ion-icon name="checkmark-circle"></ion-icon>
                    </div>
                </button>

            </div>
        </div>
    </div>
    <div class="footer-button">
        <button 
            data-teste="order-btn" 
            type="button" 
            id="footer-button" 
            onclick="closeOrder()"
        >
            Selecione os 3 itens <br/> para fechar o pedido
        </button>
    </div>

    <script>
        document.getElementById("footer-button").disabled = true;

        let activeFoodCard = null;
        let activeDrinkCard = null;
        let activeDessertCard = null;

        function activateButton() {
            if (activeFoodCard !== null && activeDrinkCard !== null && activeDessertCard !== null) {
			    const el = document.getElementById("footer-button")
                el.disabled = false;
                el.innerHTML = "Fechar pedido";
            }
        }

        function closeOrder() {
            const name = prompt('Digite seu nome:');
            const address = prompt('Digite seu endereço:')

            food = activeFoodCard.children[1].innerHTML;
            drink = activeDrinkCard.children[1].innerHTML;
            dessert = activeDessertCard.children[1].innerHTML;

            priceFood = activeFoodCard.children[3].children[0].children[0].innerHTML.replace(",",".");
            priceDrink = activeDrinkCard.children[3].children[0].children[0].innerHTML.replace(",",".");
            priceDessert = activeDessertCard.children[3].children[0].children[0].innerHTML.replace(",",".");

            total = (parseFloat(priceFood) + parseFloat(priceDrink) + parseFloat(priceDessert));
            const text = `Ol%C3%A1%2C%20gostaria%20de%20fazer%20o%20pedido%3A%0A-%20Prato%3A%20${food}%0A-%20Bebida%3A%20${drink}%0A-%20Sobremesa%3A%20${dessert}%0ATotal%3A%20R%24%20${total.toFixed(2).replace(".","%2C")}%0D%0A%0D%0ANome%3A%20${name}%0D%0AEndere%C3%A7o%3A%20${address}`
            window.location.href = `https://wa.me/5547988231073?text=${text}`
        }

        function selectFoodCard() {
			if (activeFoodCard !== null) {
				activeFoodCard.classList.remove("selected-card");
                activeFoodCard.children[3].children[1].classList.remove("ion-icon-active");
			}
			activeFoodCard = this;
			activeFoodCard.classList.add("selected-card");
            activeFoodCard.children[3].children[1].classList.add("ion-icon-active");

            activateButton()
		}

        function selectDrinkCard() {
			if (activeDrinkCard !== null) {
				activeDrinkCard.classList.remove("selected-card");
                activeDrinkCard.children[3].children[1].classList.remove("ion-icon-active");
			}
			activeDrinkCard = this;
			activeDrinkCard.classList.add("selected-card");
            activeDrinkCard.children[3].children[1].classList.add("ion-icon-active");

            activateButton()
		}

        function selectDessertCard() {
			if (activeDessertCard !== null) {
				activeDessertCard.classList.remove("selected-card");
                activeDessertCard.children[3].children[1].classList.remove("ion-icon-active");
			}
			activeDessertCard = this;
			activeDessertCard.classList.add("selected-card");
            activeDessertCard.children[3].children[1].classList.add("ion-icon-active");

            activateButton()
		}

		document.getElementById("botao1").addEventListener("click", selectFoodCard);
		document.getElementById("botao2").addEventListener("click", selectFoodCard);
        document.getElementById("botao3").addEventListener("click", selectFoodCard);

        document.getElementById("botao4").addEventListener("click", selectDrinkCard);
		document.getElementById("botao5").addEventListener("click", selectDrinkCard);
        document.getElementById("botao6").addEventListener("click", selectDrinkCard);

        document.getElementById("botao7").addEventListener("click", selectDessertCard);
		document.getElementById("botao8").addEventListener("click", selectDessertCard);
        document.getElementById("botao9").addEventListener("click", selectDessertCard);
    </script>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>